<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FitTakip Pro</title>
    <style>
        /* GENEL AYARLAR */
        :root { --primary: #007bff; --bg: #f4f7f6; --text: #333; --sidebar-w: 250px; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--bg); margin: 0; padding: 0; color: var(--text); overflow-x: hidden; }
        
        /* HEADER (√úST √áUBUK) */
        header { background: white; padding: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); display: flex; align-items: center; position: sticky; top: 0; z-index: 100; }
        .menu-btn { font-size: 24px; cursor: pointer; margin-right: 15px; background: none; border: none; color: var(--primary); }
        .app-title { font-size: 18px; font-weight: bold; margin: 0; }
        .date-badge { margin-left: auto; font-size: 12px; color: #888; background: #eee; padding: 4px 8px; border-radius: 12px; }

        /* YAN MEN√ú (SIDEBAR) */
        .sidebar { height: 100%; width: var(--sidebar-w); position: fixed; z-index: 200; top: 0; left: -260px; background-color: #343a40; overflow-x: hidden; transition: 0.3s; padding-top: 60px; box-shadow: 2px 0 10px rgba(0,0,0,0.2); }
        .sidebar a { padding: 15px 25px; text-decoration: none; font-size: 16px; color: #f1f1f1; display: block; transition: 0.2s; border-bottom: 1px solid #444; }
        .sidebar a:hover { background-color: #007bff; color: white; }
        .sidebar .closebtn { position: absolute; top: 10px; right: 20px; font-size: 36px; margin-left: 50px; background: none; border: none; color: white; cursor: pointer; }
        
        /* MEN√ú A√áIKKEN ARKA PLAN KARARTMA */
        .overlay { display: none; position: fixed; width: 100%; height: 100%; top: 0; left: 0; background-color: rgba(0,0,0,0.5); z-index: 150; }

        /* SAYFA ƒ∞√áERƒ∞KLERƒ∞ (PAGES) */
        .page { display: none; padding: 20px; max-width: 600px; margin: 0 auto; animation: fadeIn 0.4s; }
        .page.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* KART TASARIMLARI */
        .card { background: white; border-radius: 12px; padding: 20px; margin-bottom: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        h2 { margin-top: 0; font-size: 18px; color: var(--primary); border-bottom: 2px solid #eee; padding-bottom: 10px; margin-bottom: 15px; }

        /* FORM ELEMANLARI */
        input, select { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        button.primary-btn { width: 100%; background-color: var(--primary); color: white; padding: 14px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; font-weight: bold; margin-top: 10px; }
        button.delete-btn { background: #ff4d4d; color: white; border: none; padding: 5px 10px; border-radius: 4px; font-size: 12px; float: right; }

        /* AKTƒ∞Vƒ∞TE Lƒ∞STESƒ∞ */
        .task-item { display: flex; align-items: center; padding: 12px; border-bottom: 1px solid #f0f0f0; }
        .task-item:last-child { border-bottom: none; }
        .task-checkbox { width: 24px; height: 24px; margin-right: 15px; cursor: pointer; }
        .task-content { flex-grow: 1; }
        .task-title { font-weight: 600; font-size: 15px; }
        .task-meta { font-size: 12px; color: #777; }
        .task-link { color: var(--primary); text-decoration: none; font-size: 13px; margin-right: 10px; display: inline-block; margin-top: 4px; }
        
        /* √ñZET KUTUSU */
        .summary-stats { display: flex; justify-content: space-around; text-align: center; }
        .stat-box strong { font-size: 24px; display: block; color: var(--primary); }
        .stat-box span { font-size: 12px; color: #666; }

        /* TABLO */
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        th { color: #555; }
    </style>
</head>
<body>

    <div id="overlay" class="overlay" onclick="closeNav()"></div>

    <div id="mySidebar" class="sidebar">
        <button class="closebtn" onclick="closeNav()">&times;</button>
        <div style="text-align:center; padding: 20px; color: #888; font-size: 12px;">MEN√ú</div>
        <a href="#" onclick="switchPage('dashboard')">üè† Ana Sayfa</a>
        <a href="#" onclick="switchPage('add-activity')">‚ûï Aktivite Ekle/Sil</a>
        <a href="#" onclick="switchPage('history')">üìú Ge√ßmi≈ü Kayƒ±tlar</a>
        <a href="#" onclick="switchPage('profile')">üë§ Profil & Ayarlar</a>
    </div>

    <header>
        <button class="menu-btn" onclick="openNav()">&#9776;</button>
        <p class="app-title">FitTakip</p>
        <span class="date-badge" id="headerDate">--.--.----</span>
    </header>

    <div id="dashboard" class="page active">
        <div class="card">
            <div class="summary-stats">
                <div class="stat-box">
                    <strong id="totalCalDisp">0</strong>
                    <span>Toplam Kcal</span>
                </div>
                <div class="stat-box" style="border-left:1px solid #eee; border-right:1px solid #eee; padding:0 15px;">
                    <strong id="stepCalDisp">0</strong>
                    <span>Adƒ±m Kcal</span>
                </div>
                <div class="stat-box">
                    <strong id="sportCalDisp">0</strong>
                    <span>Spor Kcal</span>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>G√ºn√ºn Antrenmanlarƒ±</h2>
            <div id="taskListContainer">
                <p style="text-align:center; color:#999; padding:20px;">Hen√ºz aktivite eklemedin.<br>Men√ºden "Aktivite Ekle"ye git.</p>
            </div>
        </div>

        <div class="card">
            <h2>Adƒ±m Sayacƒ±</h2>
            <input type="number" id="dailyStepsInput" placeholder="Bug√ºnk√º adƒ±m sayƒ±n..." oninput="calculate()">
            <small style="color:#888;">Kilonuza g√∂re otomatik hesaplanƒ±r.</small>
        </div>
    </div>

    <div id="add-activity" class="page">
        <div class="card">
            <h2>Yeni Aktivite Tanƒ±mla</h2>
            <p style="font-size:13px; color:#666;">Buraya eklediƒüin aktiviteler Ana Sayfa'da g√ºnl√ºk g√∂rev olarak g√∂r√ºn√ºr.</p>
            
            <label>Aktivite Adƒ±</label>
            <input type="text" id="newActName" placeholder="√ñrn: 15 Dk Karƒ±n Kasƒ±">

            <label>YouTube Linki (Opsiyonel)</label>
            <input type="url" id="newActLink" placeholder="https://youtube.com/...">

            <label>Tahmini Kalori</label>
            <input type="number" id="newActCal" placeholder="√ñrn: 150">

            <button class="primary-btn" onclick="addNewActivity()">Listeye Ekle</button>
        </div>

        <div class="card">
            <h2>Kayƒ±tlƒ± Aktivitelerim</h2>
            <div id="manageListContainer">
                </div>
        </div>
    </div>

    <div id="history" class="page">
        <div class="card">
            <h2>Ge√ßmi≈ü G√ºnl√ºkler</h2>
            <table id="historyTable">
                <thead><tr><th>Tarih</th><th>Adƒ±m</th><th>Kcal</th></tr></thead>
                <tbody></tbody>
            </table>
            <button class="primary-btn" style="background:#6c757d; margin-top:15px;" onclick="clearHistory()">Ge√ßmi≈üi Temizle</button>
        </div>
    </div>

    <div id="profile" class="page">
        <div class="card">
            <h2>V√ºcut Bilgileri</h2>
            <label>G√ºncel Kilo (kg)</label>
            <input type="number" id="userWeight" placeholder="80" onchange="calculate()">
            
            <label>Boy (cm)</label>
            <input type="number" id="userHeight" placeholder="180" onchange="saveProfile()">
            
            <button class="primary-btn" onclick="saveProfile(); alert('Bilgiler Kaydedildi!');">Kaydet</button>
        </div>
        
        <div class="card">
            <h2>G√ºn√º Manuel Bitir</h2>
            <p style="font-size:13px; color:#666;">Gece 00:00'da sistem otomatik yeni g√ºne ge√ßer. Beklemek istemiyorsan:</p>
            <button class="primary-btn" style="background:#ff9800;" onclick="forceEndDay()">G√ºn√º Bitir ve Ar≈üivle</button>
        </div>
    </div>

<script>
    // --- VERƒ∞ YAPISI ---
    let appData = {
        activities: [], // {id, name, link, cal, completed}
        history: [],
        weight: 80,
        height: 180,
        dailySteps: 0,
        lastDate: new Date().toLocaleDateString('tr-TR')
    };

    // --- BA≈ûLANGI√á ---
    document.addEventListener('DOMContentLoaded', () => {
        loadData();
        checkNewDay();
        updateUI();
        
        // Tarihi yazdƒ±r
        document.getElementById('headerDate').innerText = appData.lastDate;
    });

    // --- MEN√ú VE SAYFA GE√áƒ∞≈ûLERƒ∞ ---
    function openNav() {
        document.getElementById("mySidebar").style.left = "0";
        document.getElementById("overlay").style.display = "block";
    }
    function closeNav() {
        document.getElementById("mySidebar").style.left = "-260px";
        document.getElementById("overlay").style.display = "none";
    }
    function switchPage(pageId) {
        // T√ºm sayfalarƒ± gizle
        document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
        // Se√ßileni g√∂ster
        document.getElementById(pageId).classList.add('active');
        closeNav(); // Men√ºy√º kapat
        updateUI(); // Ekranƒ± yenile
    }

    // --- ANA FONKSƒ∞YONLAR ---

    function addNewActivity() {
        const name = document.getElementById('newActName').value;
        const link = document.getElementById('newActLink').value;
        const cal = parseInt(document.getElementById('newActCal').value);

        if(!name || !cal) { alert("L√ºtfen isim ve kalori girin."); return; }

        appData.activities.push({
            id: Date.now(),
            name: name,
            link: link,
            cal: cal,
            completed: false
        });

        saveData();
        updateUI();
        alert("Aktivite Eklendi!");
        
        // Inputlarƒ± temizle
        document.getElementById('newActName').value = '';
        document.getElementById('newActLink').value = '';
        document.getElementById('newActCal').value = '';
    }

    function toggleTask(id) {
        const task = appData.activities.find(a => a.id === id);
        if(task) {
            task.completed = !task.completed;
            saveData();
            calculate(); // Sadece sayƒ±larƒ± g√ºncelle, listeyi yeniden √ßizme (titremesin)
            renderTaskList(); // G√∂rseli g√ºncelle (√ßizik atmak i√ßin)
        }
    }

    function deleteTask(id) {
        if(confirm("Bu aktiviteyi silmek istiyor musun?")) {
            appData.activities = appData.activities.filter(a => a.id !== id);
            saveData();
            updateUI();
        }
    }

    function calculate() {
        // Verileri al
        appData.weight = parseFloat(document.getElementById('userWeight').value) || 0;
        appData.dailySteps = parseInt(document.getElementById('dailyStepsInput').value) || 0;

        // Hesapla
        const stepCals = Math.round(appData.dailySteps * 0.0005 * appData.weight);
        let sportCals = 0;
        appData.activities.forEach(a => { if(a.completed) sportCals += a.cal; });
        const total = stepCals + sportCals;

        // Ekrana Yaz
        document.getElementById('totalCalDisp').innerText = total;
        document.getElementById('stepCalDisp').innerText = stepCals;
        document.getElementById('sportCalDisp').innerText = sportCals;
        
        saveData();
    }

    // --- G√úNCELLEME (RENDER) ---
    function updateUI() {
        renderTaskList();
        renderManageList();
        renderHistory();
        
        // Input deƒüerlerini doldur
        document.getElementById('userWeight').value = appData.weight;
        document.getElementById('userHeight').value = appData.height || 180;
        document.getElementById('dailyStepsInput').value = appData.dailySteps > 0 ? appData.dailySteps : '';
        
        calculate();
    }

    function renderTaskList() {
        const container = document.getElementById('taskListContainer');
        container.innerHTML = '';
        
        if(appData.activities.length === 0) {
            container.innerHTML = '<p style="text-align:center; color:#999; padding:20px;">Hen√ºz aktivite yok.</p>';
            return;
        }

        appData.activities.forEach(act => {
            const isChecked = act.completed ? 'checked' : '';
            const lineThrough = act.completed ? 'text-decoration:line-through; color:#aaa;' : '';
            
            const html = `
                <div class="task-item">
                    <input type="checkbox" class="task-checkbox" ${isChecked} onchange="toggleTask(${act.id})">
                    <div class="task-content">
                        <div class="task-title" style="${lineThrough}">${act.name}</div>
                        <div class="task-meta">${act.cal} kcal</div>
                        ${act.link ? `<a href="${act.link}" target="_blank" class="task-link">‚ñ∂ Videoyu A√ß</a>` : ''}
                    </div>
                </div>
            `;
            container.innerHTML += html;
        });
    }

    function renderManageList() {
        const container = document.getElementById('manageListContainer');
        container.innerHTML = '';
        appData.activities.forEach(act => {
            container.innerHTML += `
                <div class="task-item">
                    <div class="task-content">
                        <strong>${act.name}</strong> (${act.cal} kcal)
                    </div>
                    <button class="delete-btn" onclick="deleteTask(${act.id})">Sil</button>
                </div>
            `;
        });
    }

    function renderHistory() {
        const tbody = document.querySelector('#historyTable tbody');
        tbody.innerHTML = '';
        appData.history.forEach(log => {
            tbody.innerHTML += `<tr><td>${log.date}</td><td>${log.steps}</td><td>${log.total} kcal</td></tr>`;
        });
    }

    // --- YENƒ∞ G√úN & KAYIT Sƒ∞STEMƒ∞ ---

    function checkNewDay() {
        const today = new Date().toLocaleDateString('tr-TR');
        if(appData.lastDate !== today) {
            // G√ºn deƒüi≈ümi≈ü, ar≈üive at
            archiveCurrentDay(appData.lastDate);
            appData.lastDate = today;
            // Sƒ±fƒ±rla
            appData.dailySteps = 0;
            appData.activities.forEach(a => a.completed = false);
            saveData();
            alert("Yeni bir g√ºn! Skorlarƒ±n sƒ±fƒ±rlandƒ±, iyi ≈üanslar! ‚òÄÔ∏è");
        }
    }

    function forceEndDay() {
        if(confirm("G√ºn√º ≈üimdi bitirip ar≈üive kaydetmek istiyor musun?")) {
            archiveCurrentDay(appData.lastDate + " (Manuel)");
            appData.dailySteps = 0;
            appData.activities.forEach(a => a.completed = false);
            saveData();
            updateUI();
            switchPage('history');
        }
    }

    function archiveCurrentDay(dateLabel) {
        // Hesapla
        const stepCals = Math.round(appData.dailySteps * 0.0005 * appData.weight);
        let sportCals = 0;
        appData.activities.forEach(a => { if(a.completed) sportCals += a.cal; });
        const total = stepCals + sportCals;

        if(total > 0) { // Sadece veri varsa kaydet
            appData.history.unshift({
                date: dateLabel,
                steps: appData.dailySteps,
                total: total
            });
        }
    }

    function saveData() {
        appData.height = document.getElementById('userHeight').value;
        localStorage.setItem('fitTakipData', JSON.stringify(appData));
    }

    function loadData() {
        const saved = localStorage.getItem('fitTakipData');
        if(saved) {
            appData = JSON.parse(saved);
        }
    }
    
    function saveProfile() {
        saveData();
    }
    
    function clearHistory() {
        if(confirm("Ge√ßmi≈ü silinsin mi?")) {
            appData.history = [];
            saveData();
            updateUI();
        }
    }

</script>

</body>
</html>
